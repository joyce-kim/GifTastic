<!DOCTYPE html>
<html>
<head>
	<title>GifTastic</title>
</head>

<body>
	
	<!-- div for buttons -->
	<div id="buttons"></div>
	<!-- form for user to add animals -->
	<form id="add-form">
		Add Animal:<br>
		<input type="text" name="animal-input">
		<input type="submit" value="Submit">
	</form>

	<!-- div for gifs to populate -->
	<div id="populateHere"></div>

	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
	<script type="text/javascript">

		//array of animals for each button
		var animals = ["cat", "dog", "mouse"];
		var toggle = false;

		//takes dataSet and loops through to make buttons of each item
		function makeButtons() {	
			for (var i = 0; i < animals.length; i++) {
		        var animalBtn = $("<button>");
		        animalBtn.attr("data-animal", animals[i]);
		        animalBtn.text(animals[i]);
		        $("#buttons").append(animalBtn);
		    };
		};
		makeButtons();

		//takes user input and adds to the array which is looped over to create the buttons
		// $("#add-form").on("submit", function() {
		// 	var input = $("#animal-input").val();
		// 	console.log(input);
		// 	animals.push(input);
			// makeButtons();
		// });

		$("button").on("click", function() {

			var animal = $(this).attr("data-animal");
			var queryURL = "https://api.giphy.com/v1/gifs/search?q=" +
				animal + "&api_key=dc6zaTOxFJmzC&limit=10";

			$.ajax({
				url: queryURL,
				method: "GET"
			})
			.done(function(response) {
				var results = response.data;
				for (var i = 0; i < results.length; i++) {
					var gifDiv = $("<div class='item'>");

					var rating = results[i].rating;

					var p = $("<p>").text("Rating: " + rating);

					var animalImage = $("<img>");
					animalImage.attr("src", results[i].images.fixed_height_still.url);

					gifDiv.prepend(p);
					gifDiv.prepend(animalImage);

					$("#populateHere").prepend(gifDiv);
				};
			});
		});

		$(".item").on("click", function() { console.log("click worked"); });

		// $("img").on("click", function() {
		// 	console.log("img clicked dude");
		// 	if (toggle === false) {
		// 		toggle = true;
		// 		console.log("TURNED TOGGLE ON");
		// 		for (var i = 0; i < results.length; i++) {
		// 			var gifDiv = $("<div class='item'>");

		// 			var rating = results[i].rating;

		// 			var p = $("<p>").text("Rating: " + rating);

		// 			var animalImage = $("<img>");
		// 			animalImage.attr("src", results[i].images.fixed_height.url);

		// 			gifDiv.prepend(p);
		// 			gifDiv.prepend(animalImage);

		// 			$("#populateHere").prepend(gifDiv);
		// 		};
		// 	} else {
		// 		toggle = false;
		// 		console.log("TURNED TOGGLE OFF");
		// 		for (var i = 0; i < results.length; i++) {
		// 			var gifDiv = $("<div class='item'>");

		// 			var rating = results[i].rating;

		// 			var p = $("<p>").text("Rating: " + rating);

		// 			var animalImage = $("<img>");
		// 			animalImage.attr("src", results[i].images.fixed_height_still.url);

		// 			gifDiv.prepend(p);
		// 			gifDiv.prepend(animalImage);

		// 			$("#populateHere").prepend(gifDiv);
		// 		};
		// 	};
		// });
		

	</script>
</body>
</html>