<!DOCTYPE html>
<html>
<head>
	<title>GifTastic</title>
</head>

<body>
	
	<!-- div for buttons -->
	<div id="buttons"></div>
	<!-- form for user to add animals -->
	<form id="add-form">
		Add Animal:<br>
		<input type="text" id="animal-input">
		<input type="submit" value="Submit">
	</form>

	<!-- div for gifs to populate -->
	<div id="populateHere"></div>

	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
	<script type="text/javascript">

		//array of animals for each button
		var animals = ["cat", "dog", "mouse"];
		var toggle = false;

		//takes dataSet and loops through to make buttons of each item
		function makeButton(animal) {	
	        var animalBtn = $("<button>");
	        animalBtn.attr("data-animal", animal);
	        animalBtn.text(animal);
	        $("#buttons").append(animalBtn);
		};
		
		for (var i = 0; i < animals.length; i++) {
			makeButton(animals[i]);
		};

		//takes user input and adds to the array which is looped over to create the buttons
		$("#add-form").on("submit", function() {
			event.preventDefault();
			var input = $("#animal-input").val();
			animals.push(input);
			makeButton(input);
		});

		$("button").on("click", function() {
			var animal = $(this).attr("data-animal");
			var queryURL = "https://api.giphy.com/v1/gifs/search?q=" +
				animal + "&api_key=dc6zaTOxFJmzC&limit=10";

			console.log(animal);
			$.ajax({
				url: queryURL,
				method: "GET"
			})
			.done(function(response) {
				var results = response.data;
				for (var i = 0; i < results.length; i++) {
					var gifDiv = $("<div class='item'>");

					var rating = results[i].rating;

					var p = $("<p>").text("Rating: " + rating);

					var animalImage = $("<img>");
					animalImage.attr("src", results[i].images.fixed_height_still.url);

					animalImage.attr("id", i);

					gifDiv.prepend(p);
					gifDiv.prepend(animalImage);

					$("#populateHere").prepend(gifDiv);
				};
			});
		});

		$(document).on("click", ".item", function() {
			if (toggle === false) {
				toggle = true;
				var thisIndex = $(this).find("img").attr("id");
				console.log("ON: " + thisIndex);
			} else {
				toggle = true;
				console.log("OFF: " + $(this).attr("src"));
			};
		});

//on click, need to get src of the item and switch to fixed_height
//do this by accessing results[i].images.fixed_height.url BUT how do i get results[i] without looping through	

	</script>
</body>
</html>